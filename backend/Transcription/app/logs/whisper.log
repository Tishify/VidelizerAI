2025-07-26 16:12:00.604 | INFO     | main:<module>:17 - ğŸš€ Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
2025-07-26 16:12:00.604 | INFO     | main:<module>:20 - ğŸ“¦ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Whisper...
2025-07-26 16:12:10.965 | INFO     | main:<module>:22 - âœ… ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°
2025-07-26 16:14:05.797 | INFO     | main:transcribe:39 - [a89fb233] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: test60.mp4
2025-07-26 16:14:05.808 | INFO     | main:transcribe:49 - [a89fb233] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»: uploads\a89fb233.mp4
2025-07-26 16:14:05.810 | INFO     | main:transcribe:52 - [a89fb233] ğŸ§  Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 16:15:02.658 | SUCCESS  | main:transcribe:55 - [a89fb233] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 683 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 16:15:02.663 | DEBUG    | main:transcribe:59 - [a89fb233] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 16:27:41.004 | INFO     | main:transcribe:39 - [491f996a] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: 12312.mp4
2025-07-26 16:27:41.046 | INFO     | main:transcribe:49 - [491f996a] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»: uploads\491f996a.mp4
2025-07-26 16:27:41.047 | INFO     | main:transcribe:52 - [491f996a] ğŸ§  Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 16:32:17.962 | SUCCESS  | main:transcribe:55 - [491f996a] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 2163 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 16:32:17.974 | DEBUG    | main:transcribe:59 - [491f996a] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 16:45:32.134 | INFO     | main:<module>:17 - ğŸš€ Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
2025-07-26 16:45:32.134 | INFO     | main:<module>:20 - ğŸ“¦ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Whisper...
2025-07-26 16:45:42.777 | INFO     | main:<module>:22 - âœ… ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°
2025-07-26 16:45:56.578 | INFO     | main:transcribe:39 - [9afe8f08] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: 12312.mp4
2025-07-26 16:45:56.614 | INFO     | main:transcribe:49 - [9afe8f08] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»: uploads\9afe8f08.mp4
2025-07-26 16:45:56.616 | INFO     | main:transcribe:52 - [9afe8f08] ğŸ§  Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 16:49:30.582 | SUCCESS  | main:transcribe:55 - [9afe8f08] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 2163 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 16:49:30.592 | DEBUG    | main:transcribe:59 - [9afe8f08] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 16:53:59.184 | INFO     | main:<module>:20 - ğŸš€ ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ¾
2025-07-26 16:53:59.184 | INFO     | main:<module>:23 - ğŸ“¦ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Whisper (medium)...
2025-07-26 16:54:08.694 | INFO     | main:<module>:25 - âœ… ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°
2025-07-26 20:16:05.807 | INFO     | main:<module>:20 - ğŸš€ ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ¾
2025-07-26 20:16:05.808 | INFO     | main:<module>:23 - ğŸ“¦ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Whisper (medium)...
2025-07-26 20:16:16.777 | INFO     | main:<module>:25 - âœ… ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°
2025-07-26 20:26:53.671 | INFO     | main:transcribe:102 - [aa5b4cf8] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: test60.mp4
2025-07-26 20:26:53.671 | INFO     | main:transcribe:103 - [aa5b4cf8] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ ĞºĞ°Ğº: uploads\aa5b4cf8.mp4
2025-07-26 20:26:53.674 | INFO     | main:process_file:37 - [aa5b4cf8] ğŸ§  ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 20:26:53.675 | INFO     | main:process_file:47 - [aa5b4cf8] ğŸŒ ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
2025-07-26 20:27:56.986 | SUCCESS  | main:process_file:60 - [aa5b4cf8] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 683 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 20:27:56.990 | DEBUG    | main:process_file:68 - [aa5b4cf8] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 20:30:39.215 | INFO     | main:transcribe:102 - [3e522373] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: test60.mp4
2025-07-26 20:30:39.216 | INFO     | main:transcribe:103 - [3e522373] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ ĞºĞ°Ğº: uploads\3e522373.mp4
2025-07-26 20:30:39.219 | INFO     | main:process_file:37 - [3e522373] ğŸ§  ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 20:30:39.219 | INFO     | main:process_file:47 - [3e522373] ğŸŒ ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
2025-07-26 20:31:47.114 | SUCCESS  | main:process_file:60 - [3e522373] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 683 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 20:31:47.118 | DEBUG    | main:process_file:68 - [3e522373] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 20:35:36.494 | INFO     | main:transcribe:102 - [f83606cb] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: test60.mp4
2025-07-26 20:35:36.495 | INFO     | main:transcribe:103 - [f83606cb] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ ĞºĞ°Ğº: uploads\f83606cb.mp4
2025-07-26 20:35:36.497 | INFO     | main:process_file:37 - [f83606cb] ğŸ§  ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 20:35:36.499 | INFO     | main:process_file:47 - [f83606cb] ğŸŒ ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
2025-07-26 20:35:56.898 | WARNING  | main:transcribe:88 - [6cc48297] ğŸš« ĞÑ‚ĞºĞ°Ğ· â€” ÑƒĞ¶Ğµ Ğ¸Ğ´Ñ‘Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
2025-07-26 20:36:50.484 | SUCCESS  | main:process_file:60 - [f83606cb] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 683 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 20:36:50.487 | DEBUG    | main:process_file:68 - [f83606cb] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 20:38:00.334 | INFO     | main:transcribe:102 - [cae026f9] ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: test60.mp4
2025-07-26 20:38:00.335 | INFO     | main:transcribe:103 - [cae026f9] ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ ĞºĞ°Ğº: uploads\cae026f9.mp4
2025-07-26 20:38:00.338 | INFO     | main:process_file:37 - [cae026f9] ğŸ§  ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ğ¸
2025-07-26 20:38:00.338 | INFO     | main:process_file:47 - [cae026f9] ğŸŒ ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
2025-07-26 20:39:15.259 | SUCCESS  | main:process_file:60 - [cae026f9] âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾. 683 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
2025-07-26 20:39:15.264 | DEBUG    | main:process_file:68 - [cae026f9] ğŸ§¹ Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
2025-07-26 20:42:51.958 | INFO     | main:<module>:14 - Whisper API initialized
2025-07-26 20:43:11.869 | INFO     | main:transcribe:19 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] ğŸ“¥ Received file: test60.mp4 from 127.0.0.1
2025-07-26 20:43:11.878 | DEBUG    | main:transcribe:26 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmpofl3ts0w.mp4
2025-07-26 20:43:11.878 | INFO     | main:transcribe:28 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] ğŸ§  Starting transcription
2025-07-26 20:43:11.878 | INFO     | main:transcribe:34 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] ğŸŒ Autodetect language
2025-07-26 20:44:20.569 | DEBUG    | main:transcribe:39 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] ğŸ§¹ Temp file deleted
2025-07-26 20:44:20.571 | SUCCESS  | main:transcribe:48 - [2c0d14b6-4c84-41a2-9fd7-59bab805b669] âœ… Transcription done. 683 characters
2025-07-26 20:47:53.433 | INFO     | main:<module>:14 - Whisper API initialized
2025-07-26 20:47:56.116 | INFO     | main:transcribe:19 - [894346a2-c31c-44d0-aab6-b28eb56c6478] ğŸ“¥ Received file: test60.mp4 from 127.0.0.1
2025-07-26 20:47:56.128 | DEBUG    | main:transcribe:26 - [894346a2-c31c-44d0-aab6-b28eb56c6478] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmp76k4mqbh.mp4
2025-07-26 20:47:56.129 | INFO     | main:transcribe:28 - [894346a2-c31c-44d0-aab6-b28eb56c6478] ğŸ§  Starting transcription
2025-07-26 20:47:56.129 | INFO     | main:transcribe:34 - [894346a2-c31c-44d0-aab6-b28eb56c6478] ğŸŒ Autodetect language
2025-07-26 20:49:01.178 | DEBUG    | main:transcribe:39 - [894346a2-c31c-44d0-aab6-b28eb56c6478] ğŸ§¹ Temp file deleted
2025-07-26 20:49:01.178 | SUCCESS  | main:transcribe:45 - [894346a2-c31c-44d0-aab6-b28eb56c6478] âœ… Transcription done. 683 characters
2025-07-27 16:38:34.344 | INFO     | main:<module>:14 - Whisper API initialized
2025-07-27 16:39:03.472 | INFO     | main:<module>:14 - Whisper API initialized
2025-07-27 16:39:26.942 | INFO     | main:transcribe:19 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] ğŸ“¥ Received file: tmpk1tscng_.mp4 from 127.0.0.1
2025-07-27 16:39:26.952 | DEBUG    | main:transcribe:26 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmp76psymjn.mp4
2025-07-27 16:39:26.952 | INFO     | main:transcribe:28 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] ğŸ§  Starting transcription
2025-07-27 16:39:26.952 | INFO     | main:transcribe:34 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] ğŸŒ Autodetect language
2025-07-27 16:40:38.495 | DEBUG    | main:transcribe:39 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] ğŸ§¹ Temp file deleted
2025-07-27 16:40:38.496 | SUCCESS  | main:transcribe:45 - [de2af07b-56b2-488c-8775-6992d0c3a6ea] âœ… Transcription done. 683 characters
2025-07-27 16:44:56.603 | INFO     | main:transcribe:19 - [50604154-7801-48b9-af89-c5665660958f] ğŸ“¥ Received file: tmpakqmnehg.mp4 from 127.0.0.1
2025-07-27 16:44:56.617 | DEBUG    | main:transcribe:26 - [50604154-7801-48b9-af89-c5665660958f] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmpfnwvlwov.mp4
2025-07-27 16:44:56.618 | INFO     | main:transcribe:28 - [50604154-7801-48b9-af89-c5665660958f] ğŸ§  Starting transcription
2025-07-27 16:44:56.618 | INFO     | main:transcribe:34 - [50604154-7801-48b9-af89-c5665660958f] ğŸŒ Autodetect language
2025-07-27 16:46:05.452 | DEBUG    | main:transcribe:39 - [50604154-7801-48b9-af89-c5665660958f] ğŸ§¹ Temp file deleted
2025-07-27 16:46:05.452 | SUCCESS  | main:transcribe:45 - [50604154-7801-48b9-af89-c5665660958f] âœ… Transcription done. 683 characters
2025-07-27 16:55:37.271 | INFO     | main:transcribe:19 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] ğŸ“¥ Received file: tmpcr5d255n.mp4 from 127.0.0.1
2025-07-27 16:55:37.281 | DEBUG    | main:transcribe:26 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmphs_fx5yv.mp4
2025-07-27 16:55:37.282 | INFO     | main:transcribe:28 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] ğŸ§  Starting transcription
2025-07-27 16:55:37.282 | INFO     | main:transcribe:34 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] ğŸŒ Autodetect language
2025-07-27 16:56:46.195 | DEBUG    | main:transcribe:39 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] ğŸ§¹ Temp file deleted
2025-07-27 16:56:46.195 | SUCCESS  | main:transcribe:45 - [c89a26cd-4e4d-4923-84d3-a681cb44168f] âœ… Transcription done. 683 characters
2025-07-27 16:58:16.054 | INFO     | main:transcribe:19 - [e38609d5-ec2c-46f6-b724-ff3627910e76] ğŸ“¥ Received file: tmpyooy_a9s.mp4 from 127.0.0.1
2025-07-27 16:58:16.064 | DEBUG    | main:transcribe:26 - [e38609d5-ec2c-46f6-b724-ff3627910e76] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmp03dkpcdb.mp4
2025-07-27 16:58:16.065 | INFO     | main:transcribe:28 - [e38609d5-ec2c-46f6-b724-ff3627910e76] ğŸ§  Starting transcription
2025-07-27 16:58:16.065 | INFO     | main:transcribe:34 - [e38609d5-ec2c-46f6-b724-ff3627910e76] ğŸŒ Autodetect language
2025-07-27 16:59:23.065 | DEBUG    | main:transcribe:39 - [e38609d5-ec2c-46f6-b724-ff3627910e76] ğŸ§¹ Temp file deleted
2025-07-27 16:59:23.065 | SUCCESS  | main:transcribe:45 - [e38609d5-ec2c-46f6-b724-ff3627910e76] âœ… Transcription done. 683 characters
2025-07-27 17:17:22.311 | INFO     | main:transcribe:19 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] ğŸ“¥ Received file: test60.mp4 from 127.0.0.1
2025-07-27 17:17:22.322 | DEBUG    | main:transcribe:26 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] ğŸ’¾ Saved file to temp path: C:\Users\hlibs\AppData\Local\Temp\tmp2oi1h3i1.mp4
2025-07-27 17:17:22.322 | INFO     | main:transcribe:28 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] ğŸ§  Starting transcription
2025-07-27 17:17:22.322 | INFO     | main:transcribe:34 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] ğŸŒ Autodetect language
2025-07-27 17:18:34.965 | DEBUG    | main:transcribe:39 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] ğŸ§¹ Temp file deleted
2025-07-27 17:18:34.966 | SUCCESS  | main:transcribe:45 - [a67cbeac-5db6-4523-806c-6c9ab3ac465e] âœ… Transcription done. 683 characters
2025-07-30 14:41:50.170 | INFO     | main:<module>:14 - Whisper API initialized
2025-07-30 14:42:46.366 | INFO     | main:transcribe:19 - [f205d4c3-4cf7-44c3-8228-e69cb59a7f13] ğŸ“¥ Received file: null from 127.0.0.1
2025-07-30 14:42:46.369 | DEBUG    | main:transcribe:26 - [f205d4c3-4cf7-44c3-8228-e69cb59a7f13] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4
2025-07-30 14:42:46.370 | INFO     | main:transcribe:28 - [f205d4c3-4cf7-44c3-8228-e69cb59a7f13] ğŸ§  Starting transcription
2025-07-30 14:42:46.370 | INFO     | main:transcribe:32 - [f205d4c3-4cf7-44c3-8228-e69cb59a7f13] ğŸŒ Forced language: Ukrainian
2025-07-30 14:42:48.889 | ERROR    | main:transcribe:49 - [f205d4c3-4cf7-44c3-8228-e69cb59a7f13] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604bb0>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604bb0>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604bb0>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0a7b50>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0a7b50>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10b968df0>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7910>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7910>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7910>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7910>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7910>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10e0d7a90>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x10e0a7d00>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7d90>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d604b...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x10e0a7d00>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10e0d7a90>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='null', size=0, headers=Headers({'content-disposition': 'form-data; name="f...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x142e054f0] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x142e054f0] moov atom not found
[in#0 @ 0x142e05290] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpockvlp0r.mp4.
Error opening input files: Invalid data found when processing input

2025-07-30 14:43:00.772 | INFO     | main:transcribe:19 - [73d3246f-958b-486d-b9c9-2423d03cdaa2] ğŸ“¥ Received file: null from 127.0.0.1
2025-07-30 14:43:00.773 | DEBUG    | main:transcribe:26 - [73d3246f-958b-486d-b9c9-2423d03cdaa2] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4
2025-07-30 14:43:00.773 | INFO     | main:transcribe:28 - [73d3246f-958b-486d-b9c9-2423d03cdaa2] ğŸ§  Starting transcription
2025-07-30 14:43:00.773 | INFO     | main:transcribe:32 - [73d3246f-958b-486d-b9c9-2423d03cdaa2] ğŸŒ Forced language: Ukrainian
2025-07-30 14:43:00.938 | ERROR    | main:transcribe:49 - [73d3246f-958b-486d-b9c9-2423d03cdaa2] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6050>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6050>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6050>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0a7d90>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0a7d90>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10e0d7970>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7e20>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7e20>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7e20>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7e20>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0a7e20>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10e0d6bc0>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x10e0a7f40>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd6290>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d60...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x10e0a7f40>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10e0d6bc0>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='null', size=0, headers=Headers({'content-disposition': 'form-data; name="f...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13ee158c0] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13ee158c0] moov atom not found
[in#0 @ 0x13ee155d0] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp75ruo_kj.mp4.
Error opening input files: Invalid data found when processing input

2025-07-30 14:43:05.941 | INFO     | main:transcribe:19 - [24c00618-95d2-4581-8e7e-28dbaa19bdd1] ğŸ“¥ Received file: video1606568134.mp4 from 127.0.0.1
2025-07-30 14:43:05.942 | DEBUG    | main:transcribe:26 - [24c00618-95d2-4581-8e7e-28dbaa19bdd1] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4
2025-07-30 14:43:05.942 | INFO     | main:transcribe:28 - [24c00618-95d2-4581-8e7e-28dbaa19bdd1] ğŸ§  Starting transcription
2025-07-30 14:43:05.942 | INFO     | main:transcribe:32 - [24c00618-95d2-4581-8e7e-28dbaa19bdd1] ğŸŒ Forced language: Ukrainian
2025-07-30 14:43:06.020 | ERROR    | main:transcribe:49 - [24c00618-95d2-4581-8e7e-28dbaa19bdd1] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6950>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6950>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d6950>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ffd6290>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ffd6290>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10e0d74c0>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd4040>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd4040>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd4040>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd4040>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ffd4040>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10d754430>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x11b0dad40>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db0a0>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10e0d69...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x11b0dad40>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10d754430>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='video1606568134.mp4', size=18, headers=Headers({'content-disposition': 'fo...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x146f06aa0] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x146f06aa0] moov atom not found
[in#0 @ 0x146f06850] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp5k2nyy0n.mp4.
Error opening input files: Invalid data found when processing input

2025-07-30 14:44:45.382 | INFO     | main:transcribe:19 - [b487c6d5-4870-41e0-9fd8-bf3ab7696bcf] ğŸ“¥ Received file: null from 127.0.0.1
2025-07-30 14:44:45.384 | DEBUG    | main:transcribe:26 - [b487c6d5-4870-41e0-9fd8-bf3ab7696bcf] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4
2025-07-30 14:44:45.384 | INFO     | main:transcribe:28 - [b487c6d5-4870-41e0-9fd8-bf3ab7696bcf] ğŸ§  Starting transcription
2025-07-30 14:44:45.384 | INFO     | main:transcribe:32 - [b487c6d5-4870-41e0-9fd8-bf3ab7696bcf] ğŸŒ Forced language: Ukrainian
2025-07-30 14:44:45.543 | ERROR    | main:transcribe:49 - [b487c6d5-4870-41e0-9fd8-bf3ab7696bcf] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754fa0>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754fa0>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754fa0>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db0a0>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db0a0>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10d755690>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0dae60>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0dae60>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0dae60>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0dae60>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0dae60>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10d262020>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x11b0daf80>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db2e0>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d754f...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x11b0daf80>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10d262020>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='null', size=0, headers=Headers({'content-disposition': 'form-data; name="f...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13a905c70] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13a905c70] moov atom not found
[in#0 @ 0x139706690] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpg7chc0qx.mp4.
Error opening input files: Invalid data found when processing input

2025-07-30 14:45:32.398 | INFO     | main:transcribe:19 - [11d1c41d-a588-471f-b942-c37e006ab893] ğŸ“¥ Received file: null from 127.0.0.1
2025-07-30 14:45:32.399 | DEBUG    | main:transcribe:26 - [11d1c41d-a588-471f-b942-c37e006ab893] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4
2025-07-30 14:45:32.399 | INFO     | main:transcribe:28 - [11d1c41d-a588-471f-b942-c37e006ab893] ğŸ§  Starting transcription
2025-07-30 14:45:32.399 | INFO     | main:transcribe:32 - [11d1c41d-a588-471f-b942-c37e006ab893] ğŸŒ Forced language: Ukrainian
2025-07-30 14:45:32.549 | ERROR    | main:transcribe:49 - [11d1c41d-a588-471f-b942-c37e006ab893] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d00>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d00>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d00>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db2e0>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db2e0>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10d263e80>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0daef0>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0daef0>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0daef0>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0daef0>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0daef0>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10d262170>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x11b0db1c0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db520>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d263d...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x11b0db1c0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10d262170>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='null', size=0, headers=Headers({'content-disposition': 'form-data; name="f...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x12fe30310] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x12fe30310] moov atom not found
[in#0 @ 0x12fe300c0] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmp_5yvp6y2.mp4.
Error opening input files: Invalid data found when processing input

2025-07-30 14:45:57.811 | INFO     | main:transcribe:19 - [a04f8775-0492-40a0-9805-08ffd74b68ca] ğŸ“¥ Received file: video1606568134.mp4 from 127.0.0.1
2025-07-30 14:45:57.812 | DEBUG    | main:transcribe:26 - [a04f8775-0492-40a0-9805-08ffd74b68ca] ğŸ’¾ Saved file to temp path: /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4
2025-07-30 14:45:57.813 | INFO     | main:transcribe:28 - [a04f8775-0492-40a0-9805-08ffd74b68ca] ğŸ§  Starting transcription
2025-07-30 14:45:57.813 | INFO     | main:transcribe:32 - [a04f8775-0492-40a0-9805-08ffd74b68ca] ğŸŒ Forced language: Ukrainian
2025-07-30 14:45:57.953 | ERROR    | main:transcribe:49 - [a04f8775-0492-40a0-9805-08ffd74b68ca] âŒ Transcription failed
Traceback (most recent call last):

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 58, in load_audio
    out = run(cmd, capture_output=True, check=True).stdout
          â”‚   â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4', '-f', 's16l...
          â”” <function run at 0x10110fa30>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
          â”‚                  â”‚        â”‚       â”” ['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4', '-f', 's16l...
          â”‚                  â”‚        â”” <Popen: returncode: 183 args: ['ffmpeg', '-nostdin', '-threads', '0', '-i', ...>
          â”‚                  â”” 183
          â”” <class 'subprocess.CalledProcessError'>

subprocess.CalledProcessError: Command '['ffmpeg', '-nostdin', '-threads', '0', '-i', '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4', '-f', 's16le', '-ac', '1', '-acodec', 'pcm_s16le', '-ar', '16000', '-']' returned non-zero exit status 183.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â”‚     â”‚   â”” 4
               â”‚     â”” 7
               â”” <function _main at 0x10156e320>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           â”‚    â”‚          â”” 4
           â”‚    â”” <function BaseProcess._bootstrap at 0x101084940>
           â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    â”‚    â”” <function BaseProcess.run at 0x10106ff40>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â”‚    â”‚        â”‚    â”‚        â”‚    â”” {'config': <uvicorn.config.Config object at 0x10157a350>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    â”‚    â”‚        â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”‚        â”‚    â”” ()
    â”‚    â”‚        â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>
    â”‚    â”” <function subprocess_started at 0x1022f3370>
    â”” <SpawnProcess name='SpawnProcess-1' parent=26876 started>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â”‚              â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
    â”” <bound method Server.run of <uvicorn.server.Server object at 0x10157a3b0>>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 8080)>]
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x1022f2680>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x10157a3b0>
           â”‚       â”” <function run at 0x1015752d0>
           â”” <module 'asyncio' from '/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asy...

  File "/opt/homebrew/Cellar/python@3.10/3.10.18/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x10240b6f0>
           â”‚    â”” <cyfunction Loop.run_until_complete at 0x1024ec2b0>
           â”” <uvloop.Loop running=True closed=False debug=False>

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
                 â”‚    â”‚   â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d10>>
                 â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
                 â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 â”‚    â”” <fastapi.applications.FastAPI object at 0x10284a680>
                 â”” <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x102705fc0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d10>>
                           â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
                           â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d10>>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
          â”” <fastapi.applications.FastAPI object at 0x10284a680>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          â”‚    â”‚   â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db520>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d605ea0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”‚        â”” <function ServerErrorMiddleware.__call__.<locals>._send at 0x11b0db520>
          â”‚                            â”‚    â”‚    â”‚     â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚                            â”‚    â”‚    â”‚     â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”‚    â”” <starlette.requests.Request object at 0x10b553940>
          â”‚                            â”‚    â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
          â”‚                            â”” <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6069b0>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db130>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
          â”‚    â”‚                â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db130>
          â”‚    â”‚                â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚    â”‚                â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b4fe200>>
          â”” <fastapi.routing.APIRouter object at 0x10b4fe200>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
          â”‚     â”‚      â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db130>
          â”‚     â”‚      â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚     â”‚      â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚     â”” <function Route.handle at 0x1034a2f80>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          â”‚    â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db130>
          â”‚    â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚    â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚    â”” <function request_response.<locals>.app at 0x10e0a7be0>
          â”” APIRoute(path='/transcribe', name='transcribe', methods=['POST'])
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          â”‚                            â”‚    â”‚        â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db130>
          â”‚                            â”‚    â”‚        â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚                            â”‚    â”‚        â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”‚                            â”‚    â”” <starlette.requests.Request object at 0x10b5516c0>
          â”‚                            â”” <function request_response.<locals>.app.<locals>.app at 0x11b0db400>
          â”” <function wrap_app_handling_exceptions at 0x1034a1bd0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          â”‚   â”‚      â”‚        â”” <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11b0db760>
          â”‚   â”‚      â”” <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10b552d...
          â”‚   â”” {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.4'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          â”” <function request_response.<locals>.app.<locals>.app at 0x11b0db400>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     â”‚    â”” <starlette.requests.Request object at 0x10b5516c0>
                     â”” <function get_request_handler.<locals>.app at 0x10e0a7c70>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         â”” <function run_endpoint_function at 0x1034d4af0>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 â”‚         â”‚      â”” {'lang': 'Ukrainian', 'file': UploadFile(filename='video1606568134.mp4', size=18, headers=Headers({'content-disposition': 'fo...
                 â”‚         â”” <function transcribe at 0x10e0a77f0>
                 â”” <fastapi.dependencies.models.Dependant object at 0x10d6056c0>

> File "/Users/mykytatishkin/Documents/GitHub/VidelizerAI/backend/Transcription/app/main.py", line 36, in transcribe
    result = model.transcribe(tmp_path, **options)
             â”‚     â”‚          â”‚           â”” {'fp16': False, 'language': 'Ukrainian'}
             â”‚     â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4'
             â”‚     â”” <function transcribe at 0x10b4a6c20>
             â”” Whisper(
                 (encoder): AudioEncoder(
                   (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
                   (conv2): C...

  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/transcribe.py", line 139, in transcribe
    mel = log_mel_spectrogram(audio, model.dims.n_mels, padding=N_SAMPLES)
          â”‚                   â”‚      â”‚     â”‚    â”‚               â”” 480000
          â”‚                   â”‚      â”‚     â”‚    â”” 80
          â”‚                   â”‚      â”‚     â”” ModelDimensions(n_mels=80, n_audio_ctx=1500, n_audio_state=1024, n_audio_head=16, n_audio_layer=24, n_vocab=51865, n_text_ctx...
          â”‚                   â”‚      â”” Whisper(
          â”‚                   â”‚          (encoder): AudioEncoder(
          â”‚                   â”‚            (conv1): Conv1d(80, 1024, kernel_size=(3,), stride=(1,), padding=(1,))
          â”‚                   â”‚            (conv2): C...
          â”‚                   â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4'
          â”” <function log_mel_spectrogram at 0x10b1bab90>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 140, in log_mel_spectrogram
    audio = load_audio(audio)
            â”‚          â”” '/var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4'
            â”” <function load_audio at 0x10b1b9c60>
  File "/Users/mykytatishkin/Library/Caches/pypoetry/virtualenvs/videlizerai-transcription-BEehPKBW-py3.10/lib/python3.10/site-packages/whisper/audio.py", line 60, in load_audio
    raise RuntimeError(f"Failed to load audio: {e.stderr.decode()}") from e

RuntimeError: Failed to load audio: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x147004790] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x147004790] moov atom not found
[in#0 @ 0x147004530] Error opening input: Invalid data found when processing input
Error opening input file /var/folders/r9/t_ymwqq10jbc39r9dv1qt_900000gn/T/tmpqp596l5z.mp4.
Error opening input files: Invalid data found when processing input

